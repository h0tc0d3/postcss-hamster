"use strict";

exports.__esModule = true;
/**
 * @module Helper
 * 
 * @description Constants and Help functions.
 * 
 * @version 1.0
 * @author Grigory Vasilyev <postcss.hamster@gmail.com> https://github.com/h0tc0d3
 * @copyright Copyright (c) 2017, Grigory Vasilyev
 * @license Apache License, Version 2.0, http://www.apache.org/licenses/LICENSE-2.0 
 */

function dotPos(value) {
    var len = value.length;
    do {
        len--;
        if (value.charCodeAt(len) === 46) {
            return len;
        }
    } while (len >= 0);
    return -1;
}

/**
 * Fast Format Float Values.
 * @param {number} value - input value.
 */

// . - 46 0 - 48
function formatValue(value) {
    value = value.toFixed(4);
    var pos = dotPos(value);
    if (pos > -1) {
        var len = value.length;
        var code = 0;
        do {
            len--;
            code = value.charCodeAt(len);
        } while (code === 48 && pos < len || code === 46 && pos === len);

        if (len + 1 === value.length) {
            return value;
        }

        var ret = new safeUint8Array(len + 1);
        for (var j = 0; j <= len; j++) {
            ret[j] = value.charCodeAt(j);
        }
        return String.fromCharCode.apply(null, ret);
    }
    return value;
}

/**
 * Format Number to Int.
 * @param {number} value - input value.
 */

function formatInt(value) {
    return value.toFixed(0);
}

/**
 * Unit List
 */
var UNIT = {
    PX: 1,
    EM: 2,
    REM: 3,
    PERCENT: 4,
    EX: 5,
    PT: 6,
    IN: 7
};

var unitName = ["", "px", "em", "rem", "%", "ex", "pt", "in"];

/**
 * Return Unit to value.
 * @param {string} value - input value.
 */
function getUnit(value) {
    var len = value.length;
    var code1 = value.charCodeAt(len - 1);
    var code2 = value.charCodeAt(len - 2);
    // p 80 112
    // x 88 120
    // t 84 116
    // e 69 101
    // m 77 109
    // r 82 114
    // i 73 105
    // n 78 110
    // % 37
    if (code1 === 37) {
        return UNIT.PERCENT;
    } else if (code2 === 80 || code2 === 112) {
        if (code1 === 88 || code1 === 120) {
            return UNIT.PX;
        } else if (code1 === 84 || code1 === 116) {
            return UNIT.PT;
        }
    } else if ((code1 === 77 || code1 === 109) && (code2 === 69 || code2 === 101)) {
        var code3 = value.charCodeAt(len - 3);
        if (code3 === 82 || code3 === 114) {
            return UNIT.REM;
        }
        return UNIT.EM;
    } else if ((code1 === 78 || code1 === 110) && (code2 === 73 || code2 === 105)) {
        UNIT.IN;
    }

    return 0;
}

/**
 * Regexp for rem value.
 */

var remRegexp = /([0-9\.]+)rem/i;

/**
 * Check value contains string;
 * @param {number} value - input value.
 */

function isHas(value, string) {
    return value.toLowerCase().indexOf(string) > -1;
}

/**
 * Copy Values from object 2 to object 1.
 * @param object1 
 * @param object2 
 * 
 * @return object1
 */
function extend(object1, object2) {

    for (var key in object2) {
        // if(object2.hasOwnProperty(key)){
        object1[key] = object2[key];
        // }
    }

    return object1;
}

var safeUint8Array = typeof Uint8Array !== "undefined" ? Uint8Array : Array;

/**
 * To Camel Case string.
 * @param {string} value  - input string.
 */
function toCamelCase(value) {

    var len = value.length;
    var buffer = new safeUint8Array(len);

    // Code: 48-57 Chars: 0-9
    // Code: 65-90 Chars: A-Z 
    // Code: 97-122 Chars: a-z

    var prev = value.charCodeAt(0); // previous char
    var first = true; //is first char
    var count = 0;
    for (var i = 0; i < len; i++) {

        var code = value.charCodeAt(i);

        // Check code is not contain special characters
        if (!(code < 48 || code > 90 && code < 97 || code > 122)) {

            // Check code is not number
            if (!(code >= 48 && code <= 57)) {
                // Is lowercase
                if (code >= 97 && code <= 122) {

                    if (prev < 48 || prev > 90 && prev < 97 || prev > 122) {
                        code = code & 1 + 2 + 4 + 8 + 16 + 0 + 64 + 128; // toUpperCase
                    }
                } else {
                    if (!(prev >= 65 && prev <= 90) || first) {
                        code = code | 32; // toLowerCase
                        if (first) {
                            first = false;
                        }
                    }
                }
            }
            buffer[count] = code;
            count++;
        }
        prev = code;
    }
    var ret = new safeUint8Array(count);
    for (var j = 0; j < count; j++) {
        ret[j] = buffer[j];
    }
    return String.fromCharCode.apply(null, ret);
}

/**
 * To Kebab Case string.
 * @param {string} value  - input string.
 */

function toKebabCase(value) {
    var len = value.length;
    var count = 0;
    for (var i = 0; i < len; i++) {
        var code = value.charCodeAt(i);
        if (code >= 65 && code <= 90) {
            count++;
        }
    }
    var buffer = new safeUint8Array(len + count);
    var pos = 0;
    for (var _i = 0; _i < len; _i++) {
        var _code = value.charCodeAt(_i);
        if (_code >= 65 && _code <= 90) {
            buffer[pos] = 45;
            buffer[pos + 1] = _code | 32;
            pos += 2;
        } else {
            buffer[pos] = _code;
            pos++;
        }
    }
    return String.fromCharCode.apply(null, buffer);
}

/**
 * Check string contains number.
 * @param value - inputt string.
 */
function hasNumber(value) {
    var len = value.length;
    for (var i = 0; i < len; i++) {
        var code = value.charCodeAt(i);
        if (code >= 48 && code <= 57) {
            return true;
        }
    }
    return false;
}
/**
 * Compare input string with reference string.
 * @param str - input string
 * @param refStr - reference string
 */
function cmpStr(str, refStr) {

    //return str == refStr;
    var len = refStr.length;

    if (len !== str.length) {
        return false;
    }

    for (var i = 0; i < len; i++) {
        var code = str.charCodeAt(i);
        var refCode = refStr.charCodeAt(i);

        if (code >= 65 && code <= 90) {
            code = code | 32;
        }

        if (code !== refCode) {
            return false;
        }
    }

    return true;
}

/**
 * Case sensitive compare strings
 * @param str - input string
 * @param refStr - reference string
 */
function scmpStr(str, refStr) {
    //return str === refStr;
    var len = refStr.length;

    if (len !== str.length) {
        return false;
    }

    for (var i = 0; i < len; i++) {

        if (str.charCodeAt(i) !== refStr.charCodeAt(i)) {
            return false;
        }
    }

    return true;
}

/**
 * Export helpers
 */
exports.formatInt = formatInt;
exports.formatValue = formatValue;
exports.remRegexp = remRegexp;
exports.getUnit = getUnit;
exports.isHas = isHas;
exports.extend = extend;
exports.toCamelCase = toCamelCase;
exports.toKebabCase = toKebabCase;
exports.hasNumber = hasNumber;
exports.safeUint8Array = safeUint8Array;
exports.cmpStr = cmpStr;
exports.scmpStr = scmpStr;
exports.UNIT = UNIT;
exports.unitName = unitName;
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkhlbHBlcnMuZXM2Il0sIm5hbWVzIjpbImRvdFBvcyIsInZhbHVlIiwibGVuIiwibGVuZ3RoIiwiY2hhckNvZGVBdCIsImZvcm1hdFZhbHVlIiwidG9GaXhlZCIsInBvcyIsImNvZGUiLCJyZXQiLCJzYWZlVWludDhBcnJheSIsImoiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJhcHBseSIsImZvcm1hdEludCIsIlVOSVQiLCJQWCIsIkVNIiwiUkVNIiwiUEVSQ0VOVCIsIkVYIiwiUFQiLCJJTiIsInVuaXROYW1lIiwiZ2V0VW5pdCIsImNvZGUxIiwiY29kZTIiLCJjb2RlMyIsInJlbVJlZ2V4cCIsImlzSGFzIiwic3RyaW5nIiwidG9Mb3dlckNhc2UiLCJpbmRleE9mIiwiZXh0ZW5kIiwib2JqZWN0MSIsIm9iamVjdDIiLCJrZXkiLCJVaW50OEFycmF5IiwiQXJyYXkiLCJ0b0NhbWVsQ2FzZSIsImJ1ZmZlciIsInByZXYiLCJmaXJzdCIsImNvdW50IiwiaSIsInRvS2ViYWJDYXNlIiwiaGFzTnVtYmVyIiwiY21wU3RyIiwic3RyIiwicmVmU3RyIiwicmVmQ29kZSIsInNjbXBTdHIiXSwibWFwcGluZ3MiOiI7OztBQUFBOzs7Ozs7Ozs7OztBQVlBLFNBQVNBLE1BQVQsQ0FBZ0JDLEtBQWhCLEVBQXVCO0FBQ25CLFFBQUlDLE1BQU1ELE1BQU1FLE1BQWhCO0FBQ0EsT0FBRztBQUNDRDtBQUNBLFlBQUlELE1BQU1HLFVBQU4sQ0FBaUJGLEdBQWpCLE1BQTBCLEVBQTlCLEVBQWtDO0FBQzlCLG1CQUFPQSxHQUFQO0FBQ0g7QUFDSixLQUxELFFBS1NBLE9BQU8sQ0FMaEI7QUFNQSxXQUFPLENBQUMsQ0FBUjtBQUNIOztBQUVEOzs7OztBQUtBO0FBQ0EsU0FBU0csV0FBVCxDQUFxQkosS0FBckIsRUFBNEI7QUFDeEJBLFlBQVFBLE1BQU1LLE9BQU4sQ0FBYyxDQUFkLENBQVI7QUFDQSxRQUFJQyxNQUFNUCxPQUFPQyxLQUFQLENBQVY7QUFDQSxRQUFJTSxNQUFN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QUFBLFc7UUFDQUMsUyxHQUFBQSxTO1FBQ0FyQyxjLEdBQUFBLGM7UUFDQXNDLE0sR0FBQUEsTTtRQUNBSSxPLEdBQUFBLE87UUFDQXBDLEksR0FBQUEsSTtRQUNBUSxRLEdBQUFBLFEiLCJmaWxlIjoiSGVscGVycy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBAbW9kdWxlIEhlbHBlclxyXG4gKiBcclxuICogQGRlc2NyaXB0aW9uIENvbnN0YW50cyBhbmQgSGVscCBmdW5jdGlvbnMuXHJcbiAqIFxyXG4gKiBAdmVyc2lvbiAxLjBcclxuICogQGF1dGhvciBHcmlnb3J5IFZhc2lseWV2IDxwb3N0Y3NzLmhhbXN0ZXJAZ21haWwuY29tPiBodHRwczovL2dpdGh1Yi5jb20vaDB0YzBkM1xyXG4gKiBAY29weXJpZ2h0IENvcHlyaWdodCAoYykgMjAxNywgR3JpZ29yeSBWYXNpbHlldlxyXG4gKiBAbGljZW5zZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAsIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMCBcclxuICovXHJcblxyXG5cclxuZnVuY3Rpb24gZG90UG9zKHZhbHVlKSB7XHJcbiAgICBsZXQgbGVuID0gdmFsdWUubGVuZ3RoO1xyXG4gICAgZG8ge1xyXG4gICAgICAgIGxlbi0tO1xyXG4gICAgICAgIGlmICh2YWx1ZS5jaGFyQ29kZUF0KGxlbikgPT09IDQ2KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBsZW47XHJcbiAgICAgICAgfVxyXG4gICAgfSB3aGlsZSAobGVuID49IDApO1xyXG4gICAgcmV0dXJuIC0xO1xyXG59XHJcblxyXG4vKipcclxuICogRmFzdCBGb3JtYXQgRmxvYXQgVmFsdWVzLlxyXG4gKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgLSBpbnB1dCB2YWx1ZS5cclxuICovXHJcblxyXG4vLyAuIC0gNDYgMCAtIDQ4XHJcbmZ1bmN0aW9uIGZvcm1hdFZhbHVlKHZhbHVlKSB7XHJcbiAgICB2YWx1ZSA9IHZhbHVlLnRvRml4ZWQoNCk7XHJcbiAgICBsZXQgcG9zID0gZG90UG9zKHZhbHVlKTtcclxuICAgIGlmIChwb3MgPiAtMSkge1xyXG4gICAgICAgIGxldCBsZW4gPSB2YWx1ZS5sZW5ndGg7XHJcbiAgICAgICAgbGV0IGNvZGUgPSAwO1xyXG4gICAgICAgIGRvIHtcclxuICAgICAgICAgICAgbGVuLS07XHJcbiAgICAgICAgICAgIGNvZGUgPSB2YWx1ZS5jaGFyQ29kZUF0KGxlbik7XHJcbiAgICAgICAgfSB3aGlsZSAoKGNvZGUgPT09IDQ4ICYmIHBvcyA8IGxlbikgfHwgKGNvZGUgPT09IDQ2ICYmIHBvcyA9PT0gbGVuKSk7XHJcblxyXG4gICAgICAgIGlmICgobGVuICsgMSkgPT09IHZhbHVlLmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgcmV0ID0gbmV3IHNhZmVVaW50OEFycmF5KGxlbiArIDEpO1xyXG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDw9IGxlbjsgaisrKSB7XHJcbiAgICAgICAgICAgIHJldFtqXSA9IHZhbHVlLmNoYXJDb2RlQXQoaik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIHJldCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBGb3JtYXQgTnVtYmVyIHRvIEludC5cclxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIC0gaW5wdXQgdmFsdWUuXHJcbiAqL1xyXG5cclxuZnVuY3Rpb24gZm9ybWF0SW50KHZhbHVlKSB7XHJcbiAgICByZXR1cm4gdmFsdWUudG9GaXhlZCgwKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFVuaXQgTGlzdFxyXG4gKi9cclxuY29uc3QgVU5JVCA9IHtcclxuICAgIFBYOiAxLFxyXG4gICAgRU06IDIsXHJcbiAgICBSRU06IDMsXHJcbiAgICBQRVJDRU5UOiA0LFxyXG4gICAgRVg6IDUsXHJcbiAgICBQVDogNixcclxuICAgIElOOiA3XHJcbn07XHJcblxyXG5jb25zdCB1bml0TmFtZSA9IFtcIlwiLCBcInB4XCIsIFwiZW1cIiwgXCJyZW1cIiwgXCIlXCIsIFwiZXhcIiwgXCJwdFwiLCBcImluXCJdO1xyXG5cclxuXHJcbi8qKlxyXG4gKiBSZXR1cm4gVW5pdCB0byB2YWx1ZS5cclxuICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIC0gaW5wdXQgdmFsdWUuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRVbml0KHZhbHVlKSB7XHJcbiAgICBsZXQgbGVuID0gdmFsdWUubGVuZ3RoO1xyXG4gICAgbGV0IGNvZGUxID0gdmFsdWUuY2hhckNvZGVBdChsZW4gLSAxKTtcclxuICAgIGxldCBjb2RlMiA9IHZhbHVlLmNoYXJDb2RlQXQobGVuIC0gMik7XHJcbiAgICAvLyBwIDgwIDExMlxyXG4gICAgLy8geCA4OCAxMjBcclxuICAgIC8vIHQgODQgMTE2XHJcbiAgICAvLyBlIDY5IDEwMVxyXG4gICAgLy8gbSA3NyAxMDlcclxuICAgIC8vIHIgODIgMTE0XHJcbiAgICAvLyBpIDczIDEwNVxyXG4gICAgLy8gbiA3OCAxMTBcclxuICAgIC8vICUgMzdcclxuICAgIGlmIChjb2RlMSA9PT0gMzcpIHtcclxuICAgICAgICByZXR1cm4gVU5JVC5QRVJDRU5UO1xyXG4gICAgfSBlbHNlIGlmIChjb2RlMiA9PT0gODAgfHwgY29kZTIgPT09IDExMikge1xyXG4gICAgICAgIGlmIChjb2RlMSA9PT0gODggfHwgY29kZTEgPT09IDEyMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gVU5JVC5QWDtcclxuICAgICAgICB9IGVsc2UgaWYgKGNvZGUxID09PSA4NCB8fCBjb2RlMSA9PT0gMTE2KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBVTklULlBUO1xyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoKGNvZGUxID09PSA3NyB8fCBjb2RlMSA9PT0gMTA5KSAmJiAoY29kZTIgPT09IDY5IHx8IGNvZGUyID09PSAxMDEpKSB7XHJcbiAgICAgICAgbGV0IGNvZGUzID0gdmFsdWUuY2hhckNvZGVBdChsZW4gLSAzKTtcclxuICAgICAgICBpZiAoKGNvZGUzID09PSA4MiB8fCBjb2RlMyA9PT0gMTE0KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gVU5JVC5SRU07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBVTklULkVNO1xyXG4gICAgfSBlbHNlIGlmICgoY29kZTEgPT09IDc4IHx8IGNvZGUxID09PSAxMTApICYmIChjb2RlMiA9PT0gNzMgfHwgY29kZTIgPT09IDEwNSkpIHtcclxuICAgICAgICBVTklULklOO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICByZXR1cm4gMDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJlZ2V4cCBmb3IgcmVtIHZhbHVlLlxyXG4gKi9cclxuXHJcbmNvbnN0IHJlbVJlZ2V4cCA9IC8oWzAtOVxcLl0rKXJlbS9pO1xyXG5cclxuLyoqXHJcbiAqIENoZWNrIHZhbHVlIGNvbnRhaW5zIHN0cmluZztcclxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIC0gaW5wdXQgdmFsdWUuXHJcbiAqL1xyXG5cclxuZnVuY3Rpb24gaXNIYXModmFsdWUsIHN0cmluZykge1xyXG4gICAgcmV0dXJuIHZhbHVlLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihzdHJpbmcpID4gLTE7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQ29weSBWYWx1ZXMgZnJvbSBvYmplY3QgMiB0byBvYmplY3QgMS5cclxuICogQHBhcmFtIG9iamVjdDEgXHJcbiAqIEBwYXJhbSBvYmplY3QyIFxyXG4gKiBcclxuICogQHJldHVybiBvYmplY3QxXHJcbiAqL1xyXG5mdW5jdGlvbiBleHRlbmQob2JqZWN0MSwgb2JqZWN0Mikge1xyXG5cclxuICAgIGZvciAobGV0IGtleSBpbiBvYmplY3QyKSB7XHJcbiAgICAgICAgLy8gaWYob2JqZWN0Mi5oYXNPd25Qcm9wZXJ0eShrZXkpKXtcclxuICAgICAgICBvYmplY3QxW2tleV0gPSBvYmplY3QyW2tleV07XHJcbiAgICAgICAgLy8gfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBvYmplY3QxO1xyXG5cclxufVxyXG5cclxudmFyIHNhZmVVaW50OEFycmF5ID0gdHlwZW9mIFVpbnQ4QXJyYXkgIT09IFwidW5kZWZpbmVkXCIgPyBVaW50OEFycmF5IDogQXJyYXk7XHJcblxyXG4vKipcclxuICogVG8gQ2FtZWwgQ2FzZSBzdHJpbmcuXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSAgLSBpbnB1dCBzdHJpbmcuXHJcbiAqL1xyXG5mdW5jdGlvbiB0b0NhbWVsQ2FzZSh2YWx1ZSkge1xyXG5cclxuICAgIGxldCBsZW4gPSB2YWx1ZS5sZW5ndGg7XHJcbiAgICBsZXQgYnVmZmVyID0gbmV3IHNhZmVVaW50OEFycmF5KGxlbik7XHJcblxyXG4gICAgLy8gQ29kZTogNDgtNTcgQ2hhcnM6IDAtOVxyXG4gICAgLy8gQ29kZTogNjUtOTAgQ2hhcnM6IEEtWiBcclxuICAgIC8vIENvZGU6IDk3LTEyMiBDaGFyczogYS16XHJcblxyXG4gICAgbGV0IHByZXYgPSB2YWx1ZS5jaGFyQ29kZUF0KDApOyAvLyBwcmV2aW91cyBjaGFyXHJcbiAgICBsZXQgZmlyc3QgPSB0cnVlOyAvL2lzIGZpcnN0IGNoYXJcclxuICAgIGxldCBjb3VudCA9IDA7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XHJcblxyXG4gICAgICAgIGxldCBjb2RlID0gdmFsdWUuY2hhckNvZGVBdChpKTtcclxuXHJcbiAgICAgICAgLy8gQ2hlY2sgY29kZSBpcyBub3QgY29udGFpbiBzcGVjaWFsIGNoYXJhY3RlcnNcclxuICAgICAgICBpZiAoIShjb2RlIDwgNDggfHwgKGNvZGUgPiA5MCAmJiBjb2RlIDwgOTcpIHx8IGNvZGUgPiAxMjIpKSB7XHJcblxyXG4gICAgICAgICAgICAvLyBDaGVjayBjb2RlIGlzIG5vdCBudW1iZXJcclxuICAgICAgICAgICAgaWYgKCEoY29kZSA+PSA0OCAmJiBjb2RlIDw9IDU3KSkge1xyXG4gICAgICAgICAgICAgICAgLy8gSXMgbG93ZXJjYXNlXHJcbiAgICAgICAgICAgICAgICBpZiAoY29kZSA+PSA5NyAmJiBjb2RlIDw9IDEyMikge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAocHJldiA8IDQ4IHx8IChwcmV2ID4gOTAgJiYgcHJldiA8IDk3KSB8fCBwcmV2ID4gMTIyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGUgPSBjb2RlICYgKDEgKyAyICsgNCArIDggKyAxNiArIDAgKyA2NCArIDEyOCk7IC8vIHRvVXBwZXJDYXNlXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEocHJldiA+PSA2NSAmJiBwcmV2IDw9IDkwKSB8fCBmaXJzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlID0gY29kZSB8IDMyOyAvLyB0b0xvd2VyQ2FzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlyc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnVmZmVyW2NvdW50XSA9IGNvZGU7XHJcbiAgICAgICAgICAgIGNvdW50Kys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHByZXYgPSBjb2RlO1xyXG4gICAgfVxyXG4gICAgbGV0IHJldCA9IG5ldyBzYWZlVWludDhBcnJheShjb3VudCk7XHJcbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IGNvdW50OyBqKyspIHtcclxuICAgICAgICByZXRbal0gPSBidWZmZXJbal07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLCByZXQpO1xyXG59XHJcblxyXG4vKipcclxuICogVG8gS2ViYWIgQ2FzZSBzdHJpbmcuXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSAgLSBpbnB1dCBzdHJpbmcuXHJcbiAqL1xyXG5cclxuZnVuY3Rpb24gdG9LZWJhYkNhc2UodmFsdWUpIHtcclxuICAgIGxldCBsZW4gPSB2YWx1ZS5sZW5ndGg7XHJcbiAgICBsZXQgY291bnQgPSAwO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgIGxldCBjb2RlID0gdmFsdWUuY2hhckNvZGVBdChpKTtcclxuICAgICAgICBpZiAoY29kZSA+PSA2NSAmJiBjb2RlIDw9IDkwKSB7XHJcbiAgICAgICAgICAgIGNvdW50Kys7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgbGV0IGJ1ZmZlciA9IG5ldyBzYWZlVWludDhBcnJheShsZW4gKyBjb3VudCk7XHJcbiAgICBsZXQgcG9zID0gMDtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICBsZXQgY29kZSA9IHZhbHVlLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgaWYgKGNvZGUgPj0gNjUgJiYgY29kZSA8PSA5MCkge1xyXG4gICAgICAgICAgICBidWZmZXJbcG9zXSA9IDQ1O1xyXG4gICAgICAgICAgICBidWZmZXJbcG9zICsgMV0gPSBjb2RlIHwgMzI7XHJcbiAgICAgICAgICAgIHBvcyArPSAyO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGJ1ZmZlcltwb3NdID0gY29kZTtcclxuICAgICAgICAgICAgcG9zKys7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgYnVmZmVyKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENoZWNrIHN0cmluZyBjb250YWlucyBudW1iZXIuXHJcbiAqIEBwYXJhbSB2YWx1ZSAtIGlucHV0dCBzdHJpbmcuXHJcbiAqL1xyXG5mdW5jdGlvbiBoYXNOdW1iZXIodmFsdWUpIHtcclxuICAgIGxldCBsZW4gPSB2YWx1ZS5sZW5ndGg7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgbGV0IGNvZGUgPSB2YWx1ZS5jaGFyQ29kZUF0KGkpO1xyXG4gICAgICAgIGlmIChjb2RlID49IDQ4ICYmIGNvZGUgPD0gNTcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcbi8qKlxyXG4gKiBDb21wYXJlIGlucHV0IHN0cmluZyB3aXRoIHJlZmVyZW5jZSBzdHJpbmcuXHJcbiAqIEBwYXJhbSBzdHIgLSBpbnB1dCBzdHJpbmdcclxuICogQHBhcmFtIHJlZlN0ciAtIHJlZmVyZW5jZSBzdHJpbmdcclxuICovXHJcbmZ1bmN0aW9uIGNtcFN0cihzdHIsIHJlZlN0cikge1xyXG5cclxuICAgIC8vcmV0dXJuIHN0ciA9PSByZWZTdHI7XHJcbiAgICBsZXQgbGVuID0gcmVmU3RyLmxlbmd0aDtcclxuXHJcbiAgICBpZiAobGVuICE9PSBzdHIubGVuZ3RoKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICB2YXIgY29kZSA9IHN0ci5jaGFyQ29kZUF0KGkpO1xyXG4gICAgICAgIHZhciByZWZDb2RlID0gcmVmU3RyLmNoYXJDb2RlQXQoaSk7XHJcblxyXG4gICAgICAgIGlmIChjb2RlID49IDY1ICYmIGNvZGUgPD0gOTApIHtcclxuICAgICAgICAgICAgY29kZSA9IGNvZGUgfCAzMjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjb2RlICE9PSByZWZDb2RlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDYXNlIHNlbnNpdGl2ZSBjb21wYXJlIHN0cmluZ3NcclxuICogQHBhcmFtIHN0ciAtIGlucHV0IHN0cmluZ1xyXG4gKiBAcGFyYW0gcmVmU3RyIC0gcmVmZXJlbmNlIHN0cmluZ1xyXG4gKi9cclxuZnVuY3Rpb24gc2NtcFN0cihzdHIsIHJlZlN0cikge1xyXG4gICAgLy9yZXR1cm4gc3RyID09PSByZWZTdHI7XHJcbiAgICBsZXQgbGVuID0gcmVmU3RyLmxlbmd0aDtcclxuXHJcbiAgICBpZiAobGVuICE9PSBzdHIubGVuZ3RoKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcclxuXHJcbiAgICAgICAgaWYgKHN0ci5jaGFyQ29kZUF0KGkpICE9PSByZWZTdHIuY2hhckNvZGVBdChpKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcblxyXG4vKipcclxuICogRXhwb3J0IGhlbHBlcnNcclxuICovXHJcbmV4cG9ydCB7XHJcbiAgICBmb3JtYXRJbnQsXHJcbiAgICBmb3JtYXRWYWx1ZSxcclxuICAgIHJlbVJlZ2V4cCxcclxuICAgIGdldFVuaXQsXHJcbiAgICBpc0hhcyxcclxuICAgIGV4dGVuZCxcclxuICAgIHRvQ2FtZWxDYXNlLFxyXG4gICAgdG9LZWJhYkNhc2UsXHJcbiAgICBoYXNOdW1iZXIsXHJcbiAgICBzYWZlVWludDhBcnJheSxcclxuICAgIGNtcFN0cixcclxuICAgIHNjbXBTdHIsXHJcbiAgICBVTklULFxyXG4gICAgdW5pdE5hbWVcclxufTsiXX0=
